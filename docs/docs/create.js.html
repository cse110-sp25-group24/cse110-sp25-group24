<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: create.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: create.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* File below implements creating a memory page.
 * File loads Google Maps Places API, allows user to type in a location,
 * and stores location information for the card.
 */

let autocomplete;
let place; //location picked by user

const API_KEY_STORAGE = "googleMapsApiKLey";

/**
 * Function run upon loading the page -- API key saved in localStorage
 * is sought after, then initAutocomplete() is run to hook up address search
 * box
 */
export function initCreate() {
  const savedApiKey = localStorage.getItem(API_KEY_STORAGE);

  if (savedApiKey) {
    loadGoogleMaps(savedApiKey, "places").then(() => {
      initAutocomplete();
    });
  }
}

/**
 * Initializes the Google Places Autocomplete widget on the input element with id "location".
 * Configures autocomplete to restrict results to US geocoded addresses and limits the
 * fields returned to optimize performance.
 * Function sets up search bar, currently set to US locations only.
 */
function initAutocomplete() {
  const input = document.getElementById("location");
  autocomplete = new google.maps.places.Autocomplete(input, {
    types: ["geocode"], // or use ['establishment'] or ['(regions)'] for different types of places
    componentRestrictions: { country: "us" }, // Restrict to US, remove if you want worldwide
    fields: ["address_components", "geometry", "formatted_address"], // Limit returned data for efficiency
  });

  autocomplete.addListener("place_changed", onPlaceChanged);
}

/**
 * Callback fired when the user selects a place from the autocomplete suggestions.
 * It retrieves place details and logs relevant information, or warns if no geometry is available.
 */
function onPlaceChanged() {
  place = autocomplete.getPlace();

  if (!place.geometry) {
    // User entered something that was not suggested
    return;
  }
}

/**
 * @param {any} apiKey
 * @param {any} libraries
 * Function loads Google Maps if it isn't already loaded.
 * Potential refactoring needed
 */
async function loadGoogleMaps(apiKey, libraries) {
  return new Promise((resolve, reject) => {
    const script = document.createElement("script");
    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&amp;libraries=${libraries}`;
    script.async = true;
    script.defer = true;

    script.onload = () => {
      resolve();
    };

    script.onerror = () => {
      reject(new Error("Failed to load Google Maps API"));
    };

    document.head.appendChild(script);
  });
}

// place object returned
export function getPlace() {
  return place;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#API_KEY_STORAGE">API_KEY_STORAGE</a></li><li><a href="global.html#addMarker">addMarker</a></li><li><a href="global.html#addMemory">addMemory</a></li><li><a href="global.html#cardTemplate">cardTemplate</a></li><li><a href="global.html#changeImg">changeImg</a></li><li><a href="global.html#confirmSafety">confirmSafety</a></li><li><a href="global.html#createCardContent">createCardContent</a></li><li><a href="global.html#createCardMeta">createCardMeta</a></li><li><a href="global.html#createMemoryPhoto">createMemoryPhoto</a></li><li><a href="global.html#deleteAllMemories">deleteAllMemories</a></li><li><a href="global.html#deleteListener">deleteListener</a></li><li><a href="global.html#deleteMemory">deleteMemory</a></li><li><a href="global.html#displayAllMemories">displayAllMemories</a></li><li><a href="global.html#editListener">editListener</a></li><li><a href="global.html#fileToDataUrl">fileToDataUrl</a></li><li><a href="global.html#fillForm">fillForm</a></li><li><a href="global.html#getAllLocations">getAllLocations</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initAutocomplete">initAutocomplete</a></li><li><a href="global.html#initCreate">initCreate</a></li><li><a href="global.html#initDB">initDB</a></li><li><a href="global.html#initMap">initMap</a></li><li><a href="global.html#initMapDisplay">initMapDisplay</a></li><li><a href="global.html#insertAPIKey">insertAPIKey</a></li><li><a href="global.html#isEmptyDB">isEmptyDB</a></li><li><a href="global.html#loadGoogleMaps">loadGoogleMaps</a></li><li><a href="global.html#map">map</a></li><li><a href="global.html#onPlaceChanged">onPlaceChanged</a></li><li><a href="global.html#retrieveMemory">retrieveMemory</a></li><li><a href="global.html#submitForm">submitForm</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Jun 11 2025 02:09:43 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
